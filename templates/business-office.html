<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Office - St. Andrew Hospital</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: hsl(168, 85%, 60%);
            --primary-foreground: hsl(0, 0%, 100%);
            --secondary: hsl(240, 4%, 16%);
            --secondary-foreground: hsl(0, 0%, 100%);
            --accent: hsl(142, 71%, 45%);
            --accent-foreground: hsl(0, 0%, 100%);
            --background: hsl(0, 0%, 7%);
            --foreground: hsl(0, 0%, 98%);
            --card: hsl(240, 4%, 10%);
            --card-foreground: hsl(0, 0%, 98%);
            --border: hsl(240, 4%, 16%);
            --muted: hsl(240, 4%, 16%);
            --muted-foreground: hsl(240, 5%, 65%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background);
            color: var(--foreground);
            line-height: 1.6;
        }

        /* Header styles */
        header {
            border-bottom: 1px solid var(--border);
            background-color: var(--card);
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary);
            font-size: 20px;
        }

        .header-title h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .header-title p {
            font-size: 14px;
            color: var(--muted-foreground);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-user {
            color: var(--muted-foreground);
        }

        /* Layout */
        .main-layout {
            display: flex;
        }

        aside {
            width: 256px;
            min-height: calc(100vh - 70px);
            border-right: 1px solid var(--border);
            padding: 16px;
            background-color: var(--card);
        }

        main {
            flex: 1;
            padding: 24px;
        }

        /* Navigation */
        nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-item {
            padding: 12px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--muted-foreground);
        }

        .nav-item:hover {
            background-color: var(--secondary);
            color: var(--foreground);
        }

        .nav-item.active {
            background-color: var(--secondary);
            color: var(--primary);
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        /* Content sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .hidden {
            display: none;
        }

        /* Cards */
        .card {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: var(--secondary-foreground);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background-color: hsl(240, 4%, 20%);
        }

        .btn-success {
            background-color: var(--accent);
            color: var(--accent-foreground);
        }

        .btn-danger {
            background-color: hsl(0, 72%, 51%);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--card) 0%, hsl(240, 4%, 13%) 100%);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s;
        }

        .stat-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .stat-label {
            color: var(--muted-foreground);
            font-size: 14px;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 13px;
            color: #10b981;
        }

        /* Tables */
        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid var(--border);
            color: var(--muted-foreground);
            font-size: 14px;
            font-weight: 500;
        }

        .table td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .table tr:hover {
            background-color: hsl(240, 4%, 12%);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background-color: hsl(142, 71%, 45%, 0.2);
            color: hsl(142, 71%, 60%);
        }

        .badge-warning {
            background-color: hsl(45, 93%, 47%, 0.2);
            color: hsl(45, 93%, 60%);
        }

        .badge-info {
            background-color: hsl(200, 90%, 50%, 0.2);
            color: hsl(200, 90%, 60%);
        }

        .badge-danger {
            background-color: hsl(0, 72%, 51%, 0.2);
            color: hsl(0, 72%, 65%);
        }

        .badge-primary {
            background-color: hsla(168, 85%, 60%, 0.2);
            color: var(--primary);
        }

        /* Forms */
        input, select, textarea {
            background-color: var(--secondary);
            border: 1px solid var(--border);
            color: var(--foreground);
            padding: 10px 14px;
            border-radius: 6px;
            width: 100%;
            font-size: 14px;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px hsla(168, 85%, 60%, 0.1);
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: var(--foreground);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--muted-foreground);
            font-size: 14px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 12px;
            background-color: var(--secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--foreground);
            font-size: 14px;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #fff;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--muted-foreground);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
        }

        .close-btn:hover {
            color: var(--foreground);
        }

        /* Search */
        .search-box {
            position: relative;
        }

        .search-box input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--muted-foreground);
        }

        /* Filter bar */
        .filter-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
        }

        /* Action buttons */
        .action-btns {
            display: flex;
            gap: 8px;
        }

        /* Utility classes */
        .text-sm { font-size: 14px; }
        .text-lg { font-size: 18px; }
        .text-xl { font-size: 20px; }
        .text-2xl { font-size: 24px; }
        .text-3xl { font-size: 30px; }

        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }

        .mb-2 { margin-bottom: 8px; }
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }

        .mt-4 { margin-top: 16px; }
        .mt-6 { margin-top: 24px; }

        .p-4 { padding: 16px; }
        .p-6 { padding: 24px; }

        .flex { display: flex; }
        .flex-1 { flex: 1; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        .gap-6 { gap: 24px; }

        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }

        .space-y-3 > * + * { margin-top: 12px; }
        .space-y-4 > * + * { margin-top: 16px; }

        .w-2 { width: 8px; }
        .h-2 { height: 8px; }
        .w-4 { width: 16px; }
        .h-4 { height: 16px; }
        .w-5 { width: 20px; }
        .h-5 { height: 20px; }
        .w-10 { width: 40px; }
        .h-10 { height: 40px; }

        .rounded { border-radius: 4px; }
        .rounded-lg { border-radius: 8px; }
        .rounded-full { border-radius: 9999px; }

        /* Announcements */
        .announcement-card {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            transition: all 0.2s;
        }

        .announcement-card:hover {
            border-color: var(--primary);
        }

        .announcement-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .announcement-title {
            font-size: 16px;
            font-weight: 600;
        }

        .announcement-date {
            font-size: 12px;
            color: var(--muted-foreground);
        }

        .announcement-content {
            color: var(--muted-foreground);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Messages styling */
        .conversation-item {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .conversation-item:hover {
            background-color: var(--secondary);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        .ml-auto {
            margin-left: auto;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="header-left">
                <div class="header-icon">üíº</div>
                <div class="header-title">
                    <h1>Business Office</h1>
                    <p>St. Andrew Hospital</p>
                </div>
            </div>
            <div class="header-right">
                <span class="header-user">Business Manager: <strong id="currentUserName">{{ user_info.full_name }}</strong></span>
                <button class="btn-secondary" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <div class="main-layout">
        <!-- Sidebar -->
        <aside>
            <nav>
                <div class="nav-item active" onclick="showSection('dashboard')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    Dashboard
                </div>
                <div class="nav-item" onclick="showSection('patient-list')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                    Patient List
                </div>
                <div class="nav-item" onclick="showSection('announcements')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"/>
                    </svg>
                    Announcements
                </div>
                <div class="nav-item" onclick="showSection('messages')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    Messages
                    <span class="badge badge-danger ml-auto" id="unreadCount">3</span>
                </div>
                <div class="nav-item" onclick="showSection('service-inventory')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                    </svg>
                    Service Inventory
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h2 class="text-2xl font-semibold mb-6">Business Office Dashboard</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Total Revenue (Month)</span>
                            <div class="stat-icon" style="background-color: rgba(16, 185, 129, 0.2); color: #10b981;">$</div>
                        </div>
                        <div class="stat-value">$247,850</div>
                        <div class="stat-change">+12.5% from last month</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Pending Invoices</span>
                            <div class="stat-icon" style="background-color: rgba(245, 158, 11, 0.2); color: #f59e0b;">üìÑ</div>
                        </div>
                        <div class="stat-value">43</div>
                        <div class="stat-change">-5 from yesterday</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Outstanding Payments</span>
                            <div class="stat-icon" style="background-color: rgba(239, 68, 68, 0.2); color: #ef4444;">üí≥</div>
                        </div>
                        <div class="stat-value">$32,420</div>
                        <div class="stat-change">18 accounts</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Collection Rate</span>
                            <div class="stat-icon" style="background-color: rgba(59, 130, 246, 0.2); color: #3b82f6;">üìä</div>
                        </div>
                        <div class="stat-value">94.3%</div>
                        <div class="stat-change">+2.1% from last month</div>
                    </div>
                </div>

                <div class="card p-6">
                    <h3 class="text-lg font-semibold mb-4">Recent Transactions</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Patient</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-04</td>
                                <td>Michael Chen</td>
                                <td>Surgery - Appendectomy</td>
                                <td>$8,500.00</td>
                                <td><span class="badge badge-success">Paid</span></td>
                            </tr>
                            <tr>
                                <td>2024-01-04</td>
                                <td>Sarah Johnson</td>
                                <td>Laboratory Tests</td>
                                <td>$350.00</td>
                                <td><span class="badge badge-success">Paid</span></td>
                            </tr>
                            <tr>
                                <td>2024-01-03</td>
                                <td>Robert Williams</td>
                                <td>Emergency Room Visit</td>
                                <td>$1,200.00</td>
                                <td><span class="badge badge-warning">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Patient List Section -->
            <section id="patient-list" class="content-section hidden">
                <h2 class="text-2xl font-semibold mb-6">Patient List</h2>

                <div class="card p-6 mb-6">
                    <div class="search-box">
                        <svg class="search-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input type="text" id="patientSearch" placeholder="Search by name, ID..." onkeyup="searchPatients()">
                    </div>
                </div>

                <div class="card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Patient ID</th>
                                <th>Patient Name</th>
                                <th>Contact Number</th>
                                <th>Outstanding Balance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patientTableBody">
                            <tr>
                                <td>P-2024-001</td>
                                <td>Michael Chen</td>
                                <td>+63 912 345 6789</td>
                                <td>$0.00</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn btn-primary btn-sm" onclick="viewPatientBilling(1)">View Billing</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>P-2024-002</td>
                                <td>Sarah Johnson</td>
                                <td>+63 923 456 7890</td>
                                <td>$1,200.00</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn btn-primary btn-sm" onclick="viewPatientBilling(2)">View Billing</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>P-2024-003</td>
                                <td>Robert Williams</td>
                                <td>+63 934 567 8901</td>
                                <td>$350.00</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn btn-primary btn-sm" onclick="viewPatientBilling(3)">View Billing</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Announcements Section -->
            <section id="announcements" class="content-section hidden">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold">Announcements</h2>
                    <button class="btn btn-primary" onclick="openModal('newAnnouncementModal')">+ New Announcement</button>
                </div>

                <div id="announcementsList">
                    <div class="announcement-card">
                        <div class="announcement-header">
                            <div>
                                <div class="announcement-title">New Billing Policy Update</div>
                                <div class="announcement-date">January 4, 2025 ‚Ä¢ 10:30 AM</div>
                            </div>
                            <span class="badge badge-info">Important</span>
                        </div>
                        <div class="announcement-content">
                            Effective immediately, all insurance claims must be submitted within 48 hours of patient discharge. Please ensure all documentation is complete before submission.
                        </div>
                    </div>

                    <div class="announcement-card">
                        <div class="announcement-header">
                            <div>
                                <div class="announcement-title">System Maintenance Schedule</div>
                                <div class="announcement-date">January 3, 2025 ‚Ä¢ 2:15 PM</div>
                            </div>
                            <span class="badge badge-warning">Alert</span>
                        </div>
                        <div class="announcement-content">
                            The billing system will undergo maintenance on January 6, 2025, from 12:00 AM to 4:00 AM. Please complete all urgent transactions before this time.
                        </div>
                    </div>

                    <div class="announcement-card">
                        <div class="announcement-header">
                            <div>
                                <div class="announcement-title">Year-End Financial Report Due</div>
                                <div class="announcement-date">January 2, 2025 ‚Ä¢ 9:00 AM</div>
                            </div>
                            <span class="badge badge-danger">Urgent</span>
                        </div>
                        <div class="announcement-content">
                            All departments must submit their year-end financial reports by January 15, 2025. Late submissions will require approval from the Finance Director.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Messages Section -->
            <section id="messages" class="content-section hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-semibold">Messages</h2>
                    <button class="btn btn-primary" onclick="openCompose()">+ New Message</button>
                </div>

                <div class="grid grid-cols-3 gap-6" style="height: calc(100vh - 200px);">
                    <!-- Conversation List -->
                    <div class="card col-span-1 flex flex-col" style="height: 100%;">
                        <div class="p-4 border-b" style="border-color: var(--border);">
                            <div class="search-box">
                                <svg class="search-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                <input type="text" placeholder="Search conversations...">
                            </div>
                            <div id="conversationList" class="flex-1 pt-2" style="overflow-y: auto;">
                                <!-- Conversations will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Chat Window -->
                    <div class="card col-span-2" style="height: 100%; display: flex; flex-direction: column;">
                        <!-- Chat Header -->
                        <div id="chatHeader" class="p-4 border-b" style="border-color: var(--border); display: none;">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: var(--primary);">
                                    <span id="chatContactInitial" class="font-semibold"></span>
                                </div>
                                <div class="flex-1">
                                    <div id="chatContactName" class="font-semibold"></div>
                                    <div id="chatContactRole" class="text-sm" style="color: var(--muted-foreground);"></div>
                                </div>
                                <button class="btn btn-secondary text-sm" onclick="closeConversation()">Close</button>
                            </div>
                        </div>

                        <!-- Messages Container -->
                        <div id="messagesContainer" class="p-4" style="flex: 1; overflow-y: auto; background-color: var(--background); display: none;"></div>

                        <!-- Empty State -->
                        <div id="noConversationText" style="flex: 1; display: flex; align-items: center; justify-content: center; color: var(--muted-foreground);">
                            <div class="text-center">
                                <svg class="w-16 h-16 mx-auto mb-4" style="color: var(--muted-foreground);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                                </svg>
                                <p>Select a conversation to start messaging</p>
                            </div>
                        </div>

                        <!-- Message Input -->
                        <div id="messageInputContainer" class="p-4 border-t" style="border-color: var(--border); display: none;">
                            <div class="flex gap-2">
                                <input type="text" id="messageInput" placeholder="Type a message..." class="flex-1" onkeypress="handleMessageKeyPress(event)">
                                <button class="btn btn-primary" onclick="sendChatMessage()">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compose Modal -->
                <div class="modal" id="composeModal">
                    <div class="modal-content p-6">
                        <h3 class="text-lg font-semibold mb-4">New Message</h3>
                        <div class="space-y-4">
                            <div>
                                <label>To</label>
                                <select id="composeTo">
                                    <option value="">Select recipient</option>
                                    <option value="Finance Director">Finance Director</option>
                                    <option value="Billing Department">Billing Department</option>
                                    <option value="Front Desk">Front Desk</option>
                                    <option value="Medical Records">Medical Records</option>
                                </select>
                            </div>
                            <div>
                                <label>Subject</label>
                                <input type="text" id="composeSubject" placeholder="Message subject">
                            </div>
                            <div>
                                <label>Message</label>
                                <textarea id="composeBody" rows="5" placeholder="Type your message here..."></textarea>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn btn-primary flex-1" onclick="sendNewMessage()">Send</button>
                                <button class="btn btn-secondary flex-1" onclick="closeCompose()">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Service Inventory Section -->
            <section id="service-inventory" class="content-section hidden">
                <h2 class="text-2xl font-semibold mb-6">Service Inventory System</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Total Services</span>
                            <div class="stat-icon" style="background-color: rgba(20, 184, 166, 0.2); color: #14b8a6;">üìã</div>
                        </div>
                        <div class="stat-value" id="totalServices">0</div>
                        <div class="stat-change">Active services</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Room Services</span>
                            <div class="stat-icon" style="background-color: rgba(59, 130, 246, 0.2); color: #3b82f6;">üè•</div>
                        </div>
                        <div class="stat-value" id="roomServices">0</div>
                        <div class="stat-change">Available room types</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Diagnostic Services</span>
                            <div class="stat-icon" style="background-color: rgba(168, 85, 247, 0.2); color: #a855f7;">üî¨</div>
                        </div>
                        <div class="stat-value" id="diagnosticServices">0</div>
                        <div class="stat-change">Lab & imaging</div>
                    </div>
                </div>

                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Hospital Services & Pricing</h3>
                        <button class="btn btn-primary" onclick="openServiceModal()">Add Service</button>
                    </div>

                    <div class="filter-bar">
                        <input type="text" class="search-input" placeholder="Search services..." id="serviceSearch" onkeyup="filterServiceTable()">
                        <select class="form-select" style="width: auto;" id="serviceCategoryFilter" onchange="filterServiceTable()">
                            <option>All Categories</option>
                            <option>Room</option>
                            <option>Diagnostic</option>
                            <option>Procedure</option>
                            <option>Professional Fee</option>
                            <option>Other</option>
                        </select>
                    </div>

                    <table class="table" id="serviceTable">
                        <thead>
                            <tr>
                                <th>Service Name</th>
                                <th>Category</th>
                                <th>Price (‚Ç±)</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="serviceTableBody">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Service Modal -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add/Edit Service</h3>
                <button class="close-btn" onclick="closeModal('serviceModal')">&times;</button>
            </div>
            <form id="serviceForm" onsubmit="submitService(event)">
                <div class="form-group">
                    <label class="form-label">Service Name *</label>
                    <input type="text" name="service_name" class="form-input" placeholder="e.g., MRI Scan, CT Scan" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category *</label>
                    <select name="category" class="form-select" required>
                        <option value="">Select category</option>
                        <option value="Room">Room</option>
                        <option value="Diagnostic">Diagnostic</option>
                        <option value="Procedure">Procedure</option>
                        <option value="Professional Fee">Professional Fee</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Price (‚Ç±) *</label>
                    <input type="number" name="price" class="form-input" step="0.01" min="0.01" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea name="description" class="form-textarea" placeholder="Optional service description" rows="3"></textarea>
                </div>
                <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('serviceModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Service</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Announcement Modal -->
    <div id="newAnnouncementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">New Announcement</h3>
                <button class="close-btn" onclick="closeModal('newAnnouncementModal')">&times;</button>
            </div>
            <form onsubmit="submitAnnouncement(event)">
                <div class="form-group">
                    <label class="form-label">Title *</label>
                    <input type="text" class="form-input" placeholder="Announcement title" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority *</label>
                    <select class="form-select" required>
                        <option value="">Select priority</option>
                        <option value="info">Information</option>
                        <option value="important">Important</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Content *</label>
                    <textarea class="form-textarea" rows="5" placeholder="Type your announcement here..." required></textarea>
                </div>
                <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('newAnnouncementModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Publish</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let servicesData = [];
        let currentEditingService = null;
        let conversations = [
            {
                id: 1,
                contact: "Finance Director",
                role: "Management",
                lastMessage: "Please prepare the monthly financial report.",
                timestamp: "10 min ago",
                unread: 2,
                messages: [
                    { id: 1, sender: "Finance Director", text: "Hello, I need the monthly financial report.", timestamp: "10:30 AM", isOwn: false },
                    { id: 2, sender: "Finance Director", text: "Please prepare the monthly financial report.", timestamp: "10:31 AM", isOwn: false }
                ]
            },
            {
                id: 2,
                contact: "Billing Department",
                role: "Department",
                lastMessage: "Outstanding balance update completed.",
                timestamp: "1 hour ago",
                unread: 1,
                messages: [
                    { id: 1, sender: "Billing Department", text: "Outstanding balance update completed.", timestamp: "9:15 AM", isOwn: false }
                ]
            },
            {
                id: 3,
                contact: "Medical Records",
                role: "Department",
                lastMessage: "Thank you for the information",
                timestamp: "Yesterday",
                unread: 0,
                messages: [
                    { id: 1, sender: "Business Office", text: "Patient billing records sent", timestamp: "Yesterday 3:20 PM", isOwn: true },
                    { id: 2, sender: "Medical Records", text: "Thank you for the information", timestamp: "Yesterday 3:25 PM", isOwn: false }
                ]
            }
        ];
        let currentConversation = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadServicesFromDB();
            renderConversationList();
            updateUnreadCount();
        });

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.remove('hidden');
                section.classList.add('active');
            }
            
            event.target.closest('.nav-item').classList.add('active');
            
            // Load data when switching to service inventory
            if (sectionId === 'service-inventory') {
                loadServicesFromDB();
            }
        }

        // Service Inventory Functions
        async function loadServicesFromDB() {
            try {
                const response = await fetch('/api/services/list');
                const result = await response.json();
                
                if (result.status === 'success') {
                    servicesData = result.data;
                    populateServiceTable();
                    updateServiceStats();
                } else {
                    showNotification('Failed to load services', 'error');
                }
            } catch (error) {
                console.error('Error loading services:', error);
                showNotification('Error loading services', 'error');
            }
        }

        function populateServiceTable() {
            const tbody = document.getElementById('serviceTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (servicesData.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px; color: var(--muted-foreground);">
                            No services found. Click "Add Service" to create your first service.
                        </td>
                    </tr>
                `;
                return;
            }
            
            servicesData.forEach(service => {
                const statusClass = service.status === 'Active' ? 'badge-success' : 'badge-danger';
                const statusText = service.status === 'Active' ? 'Active' : 'Inactive';
                
                tbody.innerHTML += `
                    <tr>
                        <td>${escapeHtml(service.service_name)}</td>
                        <td>${escapeHtml(service.category)}</td>
                        <td>‚Ç±${parseFloat(service.price).toLocaleString('en-PH', {minimumFractionDigits: 2})}</td>
                        <td><span class="badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <div class="action-btns">
                                <button class="btn btn-sm btn-secondary" onclick="editService(${service.id})">Edit</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(${service.id})">Delete</button>
                            </div>
                        </td>
                    </tr>
                `;
            });
        }

        function updateServiceStats() {
            const totalServices = servicesData.filter(s => s.status === 'Active').length;
            const roomServices = servicesData.filter(s => s.category === 'Room' && s.status === 'Active').length;
            const diagnosticServices = servicesData.filter(s => s.category === 'Diagnostic' && s.status === 'Active').length;
            
            const totalServicesEl = document.getElementById('totalServices');
            const roomServicesEl = document.getElementById('roomServices');
            const diagnosticServicesEl = document.getElementById('diagnosticServices');
            
            if (totalServicesEl) totalServicesEl.textContent = totalServices;
            if (roomServicesEl) roomServicesEl.textContent = roomServices;
            if (diagnosticServicesEl) diagnosticServicesEl.textContent = diagnosticServices;
        }

        function openServiceModal() {
            currentEditingService = null;
            const modal = document.getElementById('serviceModal');
            const form = document.getElementById('serviceForm');
            const modalTitle = modal.querySelector('.modal-title');
            
            modalTitle.textContent = 'Add Service';
            form.reset();
            
            openModal('serviceModal');
        }

        function editService(serviceId) {
            const service = servicesData.find(s => s.id === serviceId);
            if (!service) {
                showNotification('Service not found', 'error');
                return;
            }
            
            currentEditingService = service;
            
            const modal = document.getElementById('serviceModal');
            const modalTitle = modal.querySelector('.modal-title');
            const form = document.getElementById('serviceForm');
            
            modalTitle.textContent = 'Edit Service';
            
            form.querySelector('input[name="service_name"]').value = service.service_name;
            form.querySelector('select[name="category"]').value = service.category;
            form.querySelector('input[name="price"]').value = parseFloat(service.price);
            
            const descriptionField = form.querySelector('textarea[name="description"]');
            if (descriptionField) {
                descriptionField.value = service.description || '';
            }
            
            openModal('serviceModal');
        }

        async function submitService(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            
            const serviceData = {
                service_name: formData.get('service_name'),
                category: formData.get('category'),
                price: parseFloat(formData.get('price')),
                description: formData.get('description') || ''
            };
            
            try {
                let url, method;
                
                if (currentEditingService) {
                    url = `/api/services/update/${currentEditingService.id}`;
                    method = 'PUT';
                } else {
                    url = '/api/services/create';
                    method = 'POST';
                }
                
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(serviceData)
                });
                
                const result = await response.json();
                
                if (result.status === 'success') {
                    showNotification(result.message, 'success');
                    closeModal('serviceModal');
                    form.reset();
                    currentEditingService = null;
                    await loadServicesFromDB();
                } else {
                    showNotification(result.message || 'Failed to save service', 'error');
                }
                
            } catch (error) {
                console.error('Error submitting service:', error);
                showNotification('Error saving service. Please try again.', 'error');
            }
        }

        async function deleteService(serviceId) {
            const service = servicesData.find(s => s.id === serviceId);
            if (!service) return;
            
            if (!confirm(`Are you sure you want to delete "${service.service_name}"?\n\nThis action cannot be undone.`)) {
                return;
            }
            
            try {
                const response = await fetch(`/api/services/delete/${serviceId}`, {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (result.status === 'success') {
                    showNotification('Service deleted successfully', 'success');
                    await loadServicesFromDB();
                } else {
                    showNotification(result.message || 'Failed to delete service', 'error');
                }
                
            } catch (error) {
                console.error('Error deleting service:', error);
                showNotification('Error deleting service. Please try again.', 'error');
            }
        }

        function filterServiceTable() {
            const searchInput = document.getElementById('serviceSearch');
            const categorySelect = document.getElementById('serviceCategoryFilter');
            
            if (!searchInput || !categorySelect) return;
            
            const searchTerm = searchInput.value.toLowerCase();
            const selectedCategory = categorySelect.value;
            
            const tbody = document.getElementById('serviceTableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const text = row.textContent.toLowerCase();
                const categoryCell = row.cells[1]?.textContent || '';
                
                const matchesSearch = text.includes(searchTerm);
                const matchesCategory = selectedCategory === 'All Categories' || categoryCell === selectedCategory;
                
                if (matchesSearch && matchesCategory) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
        }

        // Messages Functions
        function renderConversationList() {
            const list = document.getElementById("conversationList");
            if (!list) return;
            
            list.innerHTML = "";

            conversations.forEach(conv => {
                const item = document.createElement("div");
                item.className = "conversation-item";
                item.style.cssText = `
                    padding: 16px;
                    border-bottom: 1px solid var(--border);
                    cursor: pointer;
                    transition: background-color 0.2s;
                    background-color: ${conv.unread > 0 ? 'var(--secondary)' : 'transparent'};
                `;
                
                item.onclick = () => openConversation(conv.id);
                
                item.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: var(--primary);">
                            <span class="font-semibold">${conv.contact.split(' ').map(n => n[0]).join('')}</span>
                        </div>
                        <div class="flex-1" style="min-width: 0;">
                            <div class="flex items-center justify-between mb-1">
                                <div class="font-semibold">${conv.contact}</div>
                                ${conv.unread > 0 ? `<span class="badge badge-danger">${conv.unread}</span>` : ''}
                            </div>
                            <div class="text-sm" style="color: var(--muted-foreground); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${conv.lastMessage}
                            </div>
                            <div class="text-xs mt-1" style="color: var(--muted-foreground);">${conv.timestamp}</div>
                        </div>
                    </div>
                `;
                
                item.onmouseenter = function() {
                    if (conv.unread === 0) this.style.backgroundColor = 'var(--secondary)';
                };
                item.onmouseleave = function() {
                    if (conv.unread === 0) this.style.backgroundColor = 'transparent';
                };
                
                list.appendChild(item);
            });
        }

        function openConversation(convId) {
            const conv = conversations.find(c => c.id === convId);
            if (!conv) return;

            currentConversation = conv;
            conv.unread = 0;
            updateUnreadCount();

            document.getElementById("noConversationText").style.display = "none";
            document.getElementById("chatHeader").style.display = "block";
            document.getElementById("messagesContainer").style.display = "block";
            document.getElementById("messageInputContainer").style.display = "block";

            document.getElementById("chatContactInitial").textContent = conv.contact.split(' ').map(n => n[0]).join('');
            document.getElementById("chatContactName").textContent = conv.contact;
            document.getElementById("chatContactRole").textContent = conv.role;

            renderMessages();
            renderConversationList();
        }

        function renderMessages() {
            if (!currentConversation) return;

            const container = document.getElementById("messagesContainer");
            container.innerHTML = "";

            currentConversation.messages.forEach(msg => {
                const messageDiv = document.createElement("div");
                messageDiv.className = `mb-4 flex ${msg.isOwn ? 'justify-end' : 'justify-start'}`;
                
                messageDiv.innerHTML = `
                    <div style="max-width: 70%;">
                        ${!msg.isOwn ? `<div class="text-xs mb-1" style="color: var(--muted-foreground);">${msg.sender}</div>` : ''}
                        <div class="p-3 rounded-lg" style="background-color: ${msg.isOwn ? 'var(--primary)' : 'var(--secondary)'}; color: ${msg.isOwn ? 'white' : 'var(--foreground)'};">
                            ${msg.text}
                        </div>
                        <div class="text-xs mt-1 ${msg.isOwn ? 'text-right' : ''}" style="color: var(--muted-foreground);">
                            ${msg.timestamp}
                        </div>
                    </div>
                `;
                
                container.appendChild(messageDiv);
            });

            container.scrollTop = container.scrollHeight;
        }

        function closeConversation() {
            currentConversation = null;
            document.getElementById("chatHeader").style.display = "none";
            document.getElementById("messagesContainer").style.display = "none";
            document.getElementById("messageInputContainer").style.display = "none";
            document.getElementById("noConversationText").style.display = "flex";
        }

        function handleMessageKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }

        function sendChatMessage() {
            if (!currentConversation) return;

            const input = document.getElementById("messageInput");
            const text = input.value.trim();
            
            if (!text) return;

            const now = new Date();
            const timestamp = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

            const newMessage = {
                id: Date.now(),
                sender: "Business Office",
                text: text,
                timestamp: timestamp,
                isOwn: true
            };

            currentConversation.messages.push(newMessage);
            currentConversation.lastMessage = text;
            currentConversation.timestamp = "Just now";

            input.value = "";
            renderMessages();
            renderConversationList();
        }

        function openCompose() {
            document.getElementById("composeModal").classList.add("active");
            document.getElementById("composeTo").value = "";
            document.getElementById("composeSubject").value = "";
            document.getElementById("composeBody").value = "";
        }

        function closeCompose() {
            document.getElementById("composeModal").classList.remove("active");
        }

        function sendNewMessage() {
            const to = document.getElementById("composeTo").value;
            const subject = document.getElementById("composeSubject").value;
            const body = document.getElementById("composeBody").value;

            if (!to || !body) {
                showAlert('error', 'Error', 'Please fill in recipient and message');
                return;
            }

            let conv = conversations.find(c => c.contact === to);
            
            if (!conv) {
                conv = {
                    id: Date.now(),
                    contact: to,
                    role: 'Department',
                    lastMessage: body,
                    timestamp: "Just now",
                    unread: 0,
                    messages: []
                };
                conversations.unshift(conv);
            }

            const now = new Date();
            const timestamp = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

            conv.messages.push({
                id: Date.now(),
                sender: "Business Office",
                text: subject ? `${subject}: ${body}` : body,
                timestamp: timestamp,
                isOwn: true
            });

            conv.lastMessage = body;
            conv.timestamp = "Just now";

            closeCompose();
            renderConversationList();
            openConversation(conv.id);
            showAlert('success', 'Sent', 'Message sent successfully');
        }

        function updateUnreadCount() {
            const unread = conversations.reduce((sum, conv) => sum + conv.unread, 0);
            const badge = document.getElementById("unreadCount");
            if (badge) {
                badge.innerText = unread;
            }
        }

        // Utility Functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showNotification(message, type = 'info') {
            if (type === 'success') {
                alert('‚úì ' + message);
            } else if (type === 'error') {
                alert('‚úó ' + message);
            } else {
                alert(message);
            }
        }

        function showAlert(type, title, message) {
            const alert = document.createElement('div');
            alert.className = `custom-alert ${type}`;
            alert.innerHTML = `
                <div class="alert-content">
                    <div class="alert-icon">
                        ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                    </div>
                    <div class="alert-text">
                        <strong>${title}</strong>
                        <p>${message}</p>
                    </div>
                </div>
            `;
            
            alert.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                z-index: 10000;
                min-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => alert.remove(), 300);
            }, 3000);
        }

        // Patient and Announcement Functions
        function searchPatients() {
            const searchTerm = document.getElementById('patientSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#patientTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function viewPatientBilling(patientId) {
            showAlert('info', 'Patient Billing', `Viewing billing information for patient ID: ${patientId}`);
        }

        function submitAnnouncement(event) {
            event.preventDefault();
            showAlert('success', 'Success', 'Announcement published successfully!');
            closeModal('newAnnouncementModal');
            event.target.reset();
        }

        // Logout
        async function logout() {
            if (!confirm('Are you sure you want to logout?')) {
                return;
            }
            
            try {
                const response = await fetch('/api/logout', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    window.location.href = data.redirect;
                }
            } catch (err) {
                console.error('Logout error:', err);
                window.location.href = '/IMS';
            }
        }

        // Animation styles
        const style = document.createElement('style');
        style.textContent = `
            .alert-content {
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .alert-icon {
                font-size: 24px;
            }
            
            .alert-text strong {
                display: block;
                margin-bottom: 4px;
            }
            
            .alert-text p {
                margin: 0;
                font-size: 14px;
            }
        `;
        document.head.appendChild(style);


        
    </script>
</body>
</html>