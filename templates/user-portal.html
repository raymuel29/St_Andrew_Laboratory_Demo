<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St. Andrew Hospital - Patient Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f2f5;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #2c5aa0 0%, #1e3a5f 100%);
            color: white;
            padding: 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .logo {
            padding: 25px 20px;
            background: rgba(0,0,0,0.2);
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo h2 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .logo p {
            font-size: 12px;
            opacity: 0.9;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #4a9eff;
        }

        .nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: #4a9eff;
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            margin-right: 15px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 0;
        }

        /* Header */
        .header {
            background: white;
            padding: 20px 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 24px;
            color: #2c5aa0;
            margin-bottom: 5px;
        }

        .header-left p {
            font-size: 14px;
            color: #666;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: 600;
        }

        .user-info h3 {
            font-size: 16px;
            color: #333;
        }

        .user-info p {
            font-size: 13px;
            color: #666;
        }

        .user-avatar {
            cursor: pointer;
            position: relative;
        }

        .profile-dropdown {
            position: absolute;
            top: 70px;
            right: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            width: 220px;
            display: none;
            z-index: 1000;
            overflow: hidden;
        }

        .profile-dropdown.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }

        .dropdown-header h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .dropdown-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .dropdown-menu {
            padding: 10px 0;
        }

        .dropdown-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s;
            color: #333;
            text-decoration: none;
        }

        .dropdown-item:hover {
            background: #f5f5f5;
        }

        .dropdown-item svg {
            width: 18px;
            height: 18px;
            color: #666;
        }

        .dropdown-item.logout {
            color: #dc3545;
            border-top: 1px solid #f0f0f0;
            margin-top: 5px;
        }

        .dropdown-item.logout svg {
            color: #dc3545;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 25px 30px;
            background: linear-gradient(135deg, #2c5aa0 0%, #1e3a5f 100%);
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 24px;
        }

        .close-modal {
            font-size: 32px;
            cursor: pointer;
            line-height: 1;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .close-modal:hover {
            opacity: 1;
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2c5aa0;
        }

        .payment-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .radio-option:hover {
            border-color: #2c5aa0;
            background: #f8f9fa;
        }

        .radio-option input[type="radio"] {
            width: auto;
            cursor: pointer;
        }

        .radio-option input[type="radio"]:checked + span {
            color: #2c5aa0;
            font-weight: 600;
        }

        .cost-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2c5aa0;
        }

        .cost-summary h3 {
            margin: 0 0 10px 0;
            color: #2c5aa0;
            font-size: 16px;
        }

        .cost-summary p {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn-primary,
        .btn-secondary {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #2c5aa0;
            color: white;
        }

        .btn-primary:hover {
            background: #1e3a5f;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(44, 90, 160, 0.3);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-cancel {
            padding: 8px 16px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn-cancel:hover {
            background: #c82333;
        }

        /* Message Styles */
        .message-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f2f5;
        }

        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: #2c5aa0;
            border-bottom-color: #2c5aa0;
        }

        .tab-btn:hover {
            color: #2c5aa0;
        }

        .message-item {
            display: flex;
            gap: 15px;
            padding: 20px;
            background: white;
            border: 2px solid #f0f2f5;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .message-item:hover {
            border-color: #2c5aa0;
            box-shadow: 0 4px 12px rgba(44, 90, 160, 0.1);
            transform: translateX(5px);
        }

        .message-item.unread {
            background: #f0f7ff;
            border-color: #2c5aa0;
        }

        .message-icon {
            width: 50px;
            height: 50px;
            background: #e3f2fd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .message-details {
            flex: 1;
        }

        .message-details h4 {
            margin: 0 0 8px 0;
            color: #333;
            font-size: 16px;
        }

        .message-preview {
            margin: 0 0 8px 0;
            color: #666;
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .message-time {
            font-size: 12px;
            color: #999;
        }

        .unread-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #2c5aa0;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .priority-options {
            display: flex;
            gap: 15px;
        }

        .message-view-header {
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f2f5;
            margin-bottom: 20px;
        }

        .message-view-header h3 {
            margin: 0 0 15px 0;
            color: #2c5aa0;
            font-size: 20px;
        }

        .message-view-header p {
            margin: 5px 0;
            color: #666;
            font-size: 14px;
        }

        .message-view-body {
            padding: 20px 0;
            line-height: 1.8;
            color: #333;
        }

        .message-view-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f2f5;
            display: flex;
            gap: 15px;
        }

        /* Transaction Styles */
        .filter-select {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .filter-select:focus {
            outline: none;
            border-color: #2c5aa0;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: white;
            border: 2px solid #f0f2f5;
            border-radius: 8px;
            margin-bottom: 15px;
            gap: 20px;
        }

        .transaction-item.pending {
            border-left: 4px solid #ff9800;
            background: #fff8f0;
        }

        .transaction-item.paid {
            border-left: 4px solid #4caf50;
        }

        .transaction-icon {
            width: 50px;
            height: 50px;
            background: #e3f2fd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-details h4 {
            margin: 0 0 5px 0;
            color: #333;
            font-size: 16px;
        }

        .transaction-details p {
            margin: 3px 0;
            color: #666;
            font-size: 14px;
        }

        .transaction-id {
            font-size: 12px;
            color: #999;
        }

        .payment-method {
            display: inline-block;
            margin-top: 5px;
            padding: 4px 10px;
            background: #e8f5e9;
            color: #4caf50;
            border-radius: 12px;
            font-size: 12px;
        }

        .transaction-amount {
            text-align: right;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }

        .transaction-amount .amount {
            font-size: 24px;
            font-weight: 700;
            color: #ff9800;
        }

        .transaction-amount .amount.paid {
            color: #4caf50;
        }

        .btn-pay {
            padding: 10px 24px;
            background: #2c5aa0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn-pay:hover {
            background: #1e3a5f;
        }

        .btn-receipt {
            padding: 8px 16px;
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .btn-receipt:hover {
            background: #e8e8e8;
        }

        .payment-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #2c5aa0;
        }

        .payment-summary h3 {
            margin: 0 0 15px 0;
            color: #2c5aa0;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .payment-card {
            cursor: pointer;
        }

        .payment-card input[type="radio"] {
            display: none;
        }

        .payment-card .card-content {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .payment-card:hover .card-content {
            border-color: #2c5aa0;
            background: #f8f9fa;
        }

        .payment-card input[type="radio"]:checked + .card-content {
            border-color: #2c5aa0;
            background: #e3f2fd;
        }

        /* Medical Records Styles */
        .medical-info-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .medical-info-card h3 {
            margin: 0 0 20px 0;
            font-size: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .info-label {
            font-size: 13px;
            opacity: 0.9;
        }

        .info-value {
            font-size: 16px;
            font-weight: 600;
        }

        .record-item {
            background: white;
            border: 2px solid #f0f2f5;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f2f5;
        }

        .record-header h4 {
            margin: 0 0 5px 0;
            color: #333;
            font-size: 16px;
        }

        .record-header p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .btn-view-doc,
        .btn-download {
            padding: 8px 16px;
            background: #2c5aa0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.3s;
        }

        .btn-view-doc:hover,
        .btn-download:hover {
            background: #1e3a5f;
        }

        .record-content p {
            margin: 8px 0;
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.active {
            background: #e3f2fd;
            color: #2196f3;
        }

        .status-badge.completed {
            background: #e8f5e9;
            color: #4caf50;
        }

        .lab-results {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .lab-result-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 14px;
        }

        .result-normal {
            color: #4caf50;
            font-weight: 600;
        }

        .result-borderline {
            color: #ff9800;
            font-weight: 600;
        }

        .result-abnormal {
            color: #f44336;
            font-weight: 600;
        }

        /* Profile Styles */
        .profile-header-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
            color: white;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .profile-main-info h2 {
            margin: 0 0 10px 0;
            font-size: 32px;
        }

        .profile-main-info p {
            margin: 5px 0;
            opacity: 0.95;
        }

        .profile-section-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #f0f2f5;
            margin-bottom: 20px;
        }

        .profile-section-card h3 {
            margin: 0 0 20px 0;
            color: #2c5aa0;
            font-size: 18px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f2f5;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Support Styles */
        .support-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .support-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #f0f2f5;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .support-card:hover {
            border-color: #2c5aa0;
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(44, 90, 160, 0.15);
        }

        .support-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .support-card h3 {
            margin: 0 0 10px 0;
            color: #2c5aa0;
            font-size: 18px;
        }

        .support-card p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .faq-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #f0f2f5;
        }

        .faq-section > h3 {
            margin: 0 0 25px 0;
            color: #2c5aa0;
            font-size: 22px;
        }

        .faq-category {
            margin-bottom: 30px;
        }

        .faq-category h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .faq-item {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .faq-question {
            padding: 15px 20px;
            background: #f8f9fa;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
            font-weight: 600;
            color: #333;
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-toggle {
            font-size: 24px;
            font-weight: 400;
            color: #2c5aa0;
            transition: transform 0.3s;
        }

        .faq-question.active .faq-toggle {
            transform: rotate(45deg);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s;
            color: #666;
            line-height: 1.6;
        }

        .faq-answer.show {
            padding: 15px 20px;
            max-height: 500px;
        }

        /* Content Area */
        .content {
            padding: 30px 40px;
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .card-icon.blue {
            background: #e3f2fd;
            color: #2196f3;
        }

        .card-icon.green {
            background: #e8f5e9;
            color: #4caf50;
        }

        .card-icon.orange {
            background: #fff3e0;
            color: #ff9800;
        }

        .card-icon.purple {
            background: #f3e5f5;
            color: #9c27b0;
        }

        .card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .card .value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }

        /* Section */
        .section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f2f5;
        }

        .section-header h2 {
            font-size: 20px;
            color: #2c5aa0;
        }

        .btn-view-all {
            padding: 8px 16px;
            background: #2c5aa0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn-view-all:hover {
            background: #1e3a5f;
        }

        /* Appointments */
        .appointment-item {
            padding: 15px;
            border-left: 4px solid #4caf50;
            background: #f8f9fa;
            margin-bottom: 15px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .appointment-info h4 {
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
        }

        .appointment-info p {
            font-size: 14px;
            color: #666;
        }

        .appointment-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-upcoming {
            background: #e3f2fd;
            color: #2196f3;
        }

        .status-completed {
            background: #e8f5e9;
            color: #4caf50;
        }

        /* Announcements */
        .announcement-item {
            padding: 15px;
            border-left: 4px solid #ff9800;
            background: #fff8f0;
            margin-bottom: 15px;
            border-radius: 6px;
        }

        .announcement-item h4 {
            font-size: 16px;
            color: #333;
            margin-bottom: 8px;
        }

        .announcement-item p {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .announcement-date {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .content {
                padding: 20px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

    </style>
    
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2>St. Andrew Hospital</h2>
                <p>Patient Portal</p>
            </div>
            <nav class="nav-menu">
                <div class="nav-item active" onclick="showSection('home', event)">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                    </svg>
                    <span>Home</span>
                </div>
                <div class="nav-item" onclick="showSection('appointments', event)">

                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <span>Appointments</span>
                </div>
                <div class="nav-item" onclick="showSection('announcements', event)">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/>
                    </svg>
                    <span>Announcements</span>
                </div>
                <div class="nav-item" onclick="showSection('messages', event)">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                    </svg>
                    <span>Messages</span>
                </div>
                <div class="nav-item" onclick="showSection('medical-records', event)">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                    </svg>
                    <span>Medical Records</span>
                </div>
                
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <h1>Welcome Back, John!</h1>
                    <p>Tuesday, November 25, 2025</p>
                </div>
                <div class="user-profile">
                    <div class="user-info" style="text-align: right;">
                        <h3>John Doe</h3>
                        <p>Patient ID: #STH2024-001</p>
                    </div>
                    <div class="user-avatar" onclick="toggleProfileDropdown()">JD</div>
                </div>
            </div>

            <!-- Profile Dropdown -->
            <div class="profile-dropdown" id="profileDropdown">
                <div class="dropdown-header">
                    <h4>John Doe</h4>
                    <p>Patient ID: #STH2024-001</p>
                </div>
                <div class="dropdown-menu">
                    <div class="dropdown-item" onclick="viewProfile(); closeDropdown();">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                        </svg>
                        <span>My Profile</span>
                    </div>
                    <div class="dropdown-item" onclick="goToSettings(); closeDropdown();">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                        </svg>
                        <span>Settings</span>
                    </div>
                    <div class="dropdown-item" onclick="goToHelp(); closeDropdown();">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                        </svg>
                        <span>Help & Support</span>
                    </div>
                    <div class="dropdown-item logout" onclick="logout()">
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                        </svg>
                        <span onclick="logout()" style="cursor:pointer;">Log Out</span>
                    </div>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- HOME SECTION -->
                <div id="home-section" class="page-section">
                    <!-- Quick Stats Cards -->
                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-icon blue">
                                <svg fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
                                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <h3>Upcoming Appointments</h3>
                            <div class="value">3</div>
                        </div>
                        <div class="card">
                            <div class="card-icon green">
                                <svg fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <h3>Prescriptions Active</h3>
                            <div class="value">5</div>
                        </div>
                        <div class="card">
                            <div class="card-icon orange">
                                <svg fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                </svg>
                            </div>
                            <h3>Unread Messages</h3>
                            <div class="value">7</div>
                        </div>
                        
                    </div>

                    <!-- Upcoming Appointments -->
                    <div class="section">
                        <div class="section-header">
                            <h2>Upcoming Appointments</h2>
                            <button class="btn-view-all" onclick="showSection('appointments')">View All</button>
                        </div>
                        <div class="appointment-item">
                            <div class="appointment-info">
                                <h4>Dr. Maria Santos - Cardiology</h4>
                                <p>üìÖ November 28, 2025 at 10:00 AM</p>
                            </div>
                            <span class="appointment-status status-upcoming">Upcoming</span>
                        </div>
                        <div class="appointment-item">
                            <div class="appointment-info">
                                <h4>Dr. Roberto Cruz - General Checkup</h4>
                                <p>üìÖ December 5, 2025 at 2:30 PM</p>
                            </div>
                            <span class="appointment-status status-upcoming">Upcoming</span>
                        </div>
                    </div>

                    <!-- Recent Announcements -->
                    <div class="section">
                        <div class="section-header">
                            <h2>Hospital Announcements</h2>
                            <button class="btn-view-all" onclick="showSection('announcements')">View All</button>
                        </div>
                        <div class="announcement-item">
                            <h4>üéÑ Holiday Schedule Update</h4>
                            <p>Please note our adjusted operating hours during the Christmas season. Emergency services remain available 24/7.</p>
                            <div class="announcement-date">Posted on November 20, 2025</div>
                        </div>
                        <div class="announcement-item">
                            <h4>üíâ Free Flu Vaccination Program</h4>
                            <p>We're offering free flu vaccinations for all patients aged 60 and above. Schedule your appointment today!</p>
                            <div class="announcement-date">Posted on November 15, 2025</div>
                        </div>
                    </div>
                </div>

                <!-- MY PROFILE SECTION -->
                <div id="profile-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>My Profile</h2>
                            <button class="btn-view-all" onclick="enableEditProfile()">‚úèÔ∏è Edit Profile</button>
                        </div>

                        <!-- Profile Header -->
                        <div class="profile-header-card">
                            <div class="profile-avatar-large">JD</div>
                            <div class="profile-main-info">
                                <h2>John Doe</h2>
                                <p>Patient ID: #STH2024-001</p>
                                <p>Member since: January 15, 2024</p>
                            </div>
                        </div>

                        <!-- Profile Form -->
                        <form id="profileForm">
                            <div class="profile-section-card">
                                <h3>Personal Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>First Name *</label>
                                        <input type="text" id="firstName" value="John" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Last Name *</label>
                                        <input type="text" id="lastName" value="Doe" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Date of Birth *</label>
                                        <input type="date" id="birthdate" value="1990-05-15" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Gender *</label>
                                        <select id="gender" disabled>
                                            <option value="male" selected>Male</option>
                                            <option value="female">Female</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Blood Type</label>
                                        <select id="bloodType" disabled>
                                            <option value="O+" selected>O+</option>
                                            <option value="O-">O-</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Civil Status</label>
                                        <select id="civilStatus" disabled>
                                            <option value="single" selected>Single</option>
                                            <option value="married">Married</option>
                                            <option value="widowed">Widowed</option>
                                            <option value="divorced">Divorced</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-section-card">
                                <h3>Contact Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>Email Address *</label>
                                        <input type="email" id="email" value="john.doe@email.com" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Phone Number *</label>
                                        <input type="tel" id="phone" value="+63 912 345 6789" disabled>
                                    </div>
                                    <div class="form-group" style="grid-column: 1 / -1;">
                                        <label>Home Address *</label>
                                        <textarea id="address" rows="2" disabled>123 Main Street, Barangay San Antonio, Tagaytay City, Cavite 4120</textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-section-card">
                                <h3>Emergency Contact</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>Contact Name *</label>
                                        <input type="text" id="emergencyName" value="Jane Doe" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Relationship *</label>
                                        <input type="text" id="emergencyRelation" value="Spouse" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Contact Number *</label>
                                        <input type="tel" id="emergencyPhone" value="+63 917 123 4567" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Emergency Email</label>
                                        <input type="email" id="emergencyEmail" value="jane.doe@email.com" disabled>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-section-card">
                                <h3>Medical Information</h3>
                                <div class="form-grid">
                                    <div class="form-group" style="grid-column: 1 / -1;">
                                        <label>Known Allergies</label>
                                        <textarea id="allergies" rows="2" disabled>Penicillin, Peanuts</textarea>
                                    </div>
                                    <div class="form-group" style="grid-column: 1 / -1;">
                                        <label>Chronic Conditions</label>
                                        <textarea id="conditions" rows="2" disabled>Hypertension (controlled with medication)</textarea>
                                    </div>
                                    <div class="form-group" style="grid-column: 1 / -1;">
                                        <label>Current Medications</label>
                                        <textarea id="medications" rows="2" disabled>Amlodipine 5mg (once daily), Sertraline 50mg (once daily)</textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-section-card">
                                <h3>Insurance Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>Insurance Provider</label>
                                        <input type="text" id="insuranceProvider" value="PhilHealth" disabled>
                                    </div>
                                    <div class="form-group">
                                        <label>Policy Number</label>
                                        <input type="text" id="policyNumber" value="12-345678901-2" disabled>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons (hidden by default) -->
                            <div class="form-actions" id="profileActions" style="display:none;">
                                <button type="button" class="btn-secondary" onclick="cancelEditProfile()">Cancel</button>
                                <button type="button" class="btn-primary" onclick="saveProfile()">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- HELP & SUPPORT SECTION -->
                <div id="help-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>Help & Support</h2>
                        </div>

                        <!-- Quick Support Options -->
                        <div class="support-cards">
                            <div class="support-card" onclick="showComposeModal()">
                                <div class="support-icon">üìß</div>
                                <h3>Send Message</h3>
                                <p>Contact our support team directly</p>
                            </div>
                            <div class="support-card" onclick="callSupport()">
                                <div class="support-icon">üìû</div>
                                <h3>Call Us</h3>
                                <p>(046) 483-0000</p>
                            </div>
                            <div class="support-card" onclick="emailSupport()">
                                <div class="support-icon">‚úâÔ∏è</div>
                                <h3>Email Support</h3>
                                <p>support@standrews.com</p>
                            </div>
                            <div class="support-card" onclick="visitHospital()">
                                <div class="support-icon">üè•</div>
                                <h3>Visit Us</h3>
                                <p>Tagaytay City, Cavite</p>
                            </div>
                        </div>

                        <!-- FAQ Section -->
                        <div class="faq-section">
                            <h3>Frequently Asked Questions</h3>
                            
                            <div class="faq-category">
                                <h4>üìÖ Appointments</h4>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How do I book an appointment?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Click on "Appointments" in the sidebar, then click "Book New Appointment". Select your preferred service, doctor, date, and time. You can choose to pay online or at the hospital.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>Can I cancel or reschedule my appointment?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Yes, you can cancel appointments up to 24 hours before the scheduled time. Go to "Appointments" and click the "Cancel" button. For rescheduling, please contact us at (046) 483-0000 or send a message through the portal.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>What happens if I miss my appointment?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Please inform us as soon as possible if you cannot make it. Repeated no-shows may result in a fee or difficulty booking future appointments.
                                    </div>
                                </div>
                            </div>

                            <div class="faq-category">
                                <h4>üí≥ Billing & Payments</h4>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>What payment methods do you accept?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        We accept Credit/Debit Cards, GCash, PayMaya, Bank Transfer, Cash, and major insurance providers (PhilHealth, HMOs).
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How can I get a copy of my receipt?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Go to "Transactions" section and find your payment. Click the "Receipt" button to download a PDF copy of your receipt.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>Do you accept insurance?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Yes, we accept PhilHealth and major HMO providers including Maxicare, Medicard, and Intellicare. Please bring your insurance card during your visit.
                                    </div>
                                </div>
                            </div>

                            <div class="faq-category">
                                <h4>üìÑ Medical Records</h4>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How do I access my medical records?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Click on "Medical Records" in the sidebar. You can view your visit history, prescriptions, lab results, imaging reports, and download documents.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>Can I request a medical certificate?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Yes, click "Request Records" in the Medical Records section and specify that you need a medical certificate. Processing time is 24-48 hours.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How long are medical records kept?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        We maintain medical records for at least 10 years as per Philippine healthcare regulations. You can access your records anytime through the portal.
                                    </div>
                                </div>
                            </div>

                            <div class="faq-category">
                                <h4>üë§ Account & Security</h4>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How do I update my personal information?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Click on your profile icon (top right), select "My Profile", then click "Edit Profile". Make your changes and click "Save Changes".
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>How do I change my password?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Go to "Settings" from the sidebar or profile menu, then select "Change Password". You'll need to enter your current password and new password.
                                    </div>
                                </div>
                                <div class="faq-item">
                                    <div class="faq-question" onclick="toggleFaq(this)">
                                        <span>Is my information secure?</span>
                                        <span class="faq-toggle">+</span>
                                    </div>
                                    <div class="faq-answer">
                                        Yes, we use industry-standard encryption and security measures to protect your personal and medical information. Your data is stored securely and accessed only by authorized healthcare professionals.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Form -->
                        <div class="profile-section-card" style="margin-top: 30px;">
                            <h3>Still Need Help?</h3>
                            <p style="color: #666; margin-bottom: 20px;">Can't find what you're looking for? Send us a message and we'll get back to you as soon as possible.</p>
                            <button class="btn-primary" onclick="showComposeModal()" style="width: 100%;">Contact Support Team</button>
                        </div>

                        <!-- Hospital Information -->
                        <div class="profile-section-card" style="margin-top: 20px;">
                            <h3>üè• Hospital Information</h3>
                            <div class="info-grid" style="margin-top: 15px;">
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Address:</span>
                                    <span class="info-value" style="color: #333; font-weight: 400;">St. Andrew Hospital<br>Tagaytay City, Cavite 4120</span>
                                </div>
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Phone:</span>
                                    <span class="info-value" style="color: #333; font-weight: 400;">(046) 483-0000</span>
                                </div>
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Email:</span>
                                    <span class="info-value" style="color: #333; font-weight: 400;">info@standrews.com</span>
                                </div>
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Emergency Hotline:</span>
                                    <span class="info-value" style="color: #dc3545; font-weight: 600;">911 or (046) 483-0911</span>
                                </div>
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Operating Hours:</span>
                                    <span class="info-value" style="color: #333; font-weight: 400;">24/7 Emergency Services<br>Outpatient: 8AM - 5PM</span>
                                </div>
                                <div class="info-item" style="color: #333;">
                                    <span class="info-label" style="color: #666;">Visiting Hours:</span>
                                    <span class="info-value" style="color: #333; font-weight: 400;">10AM - 12PM, 2PM - 8PM</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- APPOINTMENTS SECTION -->
                <div id="appointments-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>My Appointments</h2>
                            <button class="btn-view-all" onclick="showBookingModal()">+ Book New Appointment</button>
                        </div>
                        
                        <!-- Upcoming Appointments -->
                        <h3 style="color: #2c5aa0; margin-bottom: 15px; font-size: 18px;">Upcoming Appointments</h3>
                        <div id="upcomingAppointmentsContainer">
                            <!-- Dynamic upcoming appointments will be loaded here -->
                            <div class="loading-message" style="text-align: center; padding: 40px; color: #666;">
                                <p>üìÖ Loading your upcoming appointments...</p>
                            </div>
                        </div>
                
                        <!-- Past Appointments -->
                        <h3 style="color: #2c5aa0; margin: 30px 0 15px 0; font-size: 18px;">Past Appointments</h3>
                        <div id="pastAppointmentsContainer">
                            <!-- Dynamic past appointments will be loaded here -->
                            <div class="loading-message" style="text-align: center; padding: 40px; color: #666;">
                                <p>üìã Loading your past appointments...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Booking Modal -->
                <div id="bookingModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Book New Appointment</h2>
                            <span class="close-modal" onclick="closeBookingModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <form id="bookingForm" onsubmit="submitBooking(event)">
                                <div class="form-group">
                                    <label>Service Type *</label>
                                    <select id="serviceType" required onchange="updateDoctorList()">
                                        <option value="">Select Service</option>
                                        <option value="checkup">General Check-up</option>
                                        <option value="consultation">Specialist Consultation</option>
                                        <option value="counselling">Counselling</option>
                                        <option value="room">Room Booking for Patient</option>
                                    </select>
                                </div>

                                <div class="form-group" id="departmentGroup">
                                    <label>Department *</label>
                                    <select id="department" required>
                                        <option value="">Select Department</option>
                                        <option value="pediatric">Pediatrics</option>
                                        <option value="cardiologist">Cardiologist</option>
                                        <option value="pulmonologist">Pulmonologist</option>
                                        <option value="gastroenterologist">Gastroenterologist</option>
                                        <option value="nephrologist">Nephrologist</option>
                                        <option value="orthopedic">Orthopedic</option>
                                        <option value="urologist">Urologist</option>
                                        <option value="ophthalmologist">Ophthalmologist</option>
                                        <option value="obstetric">Obstetric and Gynecology</option>
                                        <option value="psychiatrist">Psychiatrist</option>
                                        <option value="psychologist">Psychologist</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Doctor *</label>
                                    <select id="doctor" required>
                                        <option value="">Choose a doctor</option>
                                        
                                        <optgroup label="Pediatrics">
                                            <option value="Dra. Karen Icel B. Parcon" data-dept="pediatric">Dra. Karen Icel B. Parcon</option>
                                            <option value="Dr. Jose Martinez" data-dept="pediatric">Dr. Jose Martinez - Pediatrician</option>
                                            <option value="Dra. Maria Santos" data-dept="pediatric">Dra. Maria Santos - Pediatric Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Cardiologist">
                                            <option value="Dr. Roberto Cruz" data-dept="cardiologist">Dr. Roberto Cruz - Cardiologist</option>
                                            <option value="Dra. Ana Reyes" data-dept="cardiologist">Dra. Ana Reyes - Cardiac Specialist</option>
                                            <option value="Dr. Miguel Torres" data-dept="cardiologist">Dr. Miguel Torres - Interventional Cardiologist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Pulmonologist">
                                            <option value="Dr. Juan Dela Cruz" data-dept="pulmonologist">Dr. Juan Dela Cruz - Pulmonologist</option>
                                            <option value="Dra. Teresa Garcia" data-dept="pulmonologist">Dra. Teresa Garcia - Respiratory Specialist</option>
                                            <option value="Dr. Rafael Santos" data-dept="pulmonologist">Dr. Rafael Santos - Pulmonary Medicine</option>
                                        </optgroup>
                                        
                                        <optgroup label="Gastroenterologist">
                                            <option value="Dr. Carlos Rivera" data-dept="gastroenterologist">Dr. Carlos Rivera - Gastroenterologist</option>
                                            <option value="Dra. Linda Ramos" data-dept="gastroenterologist">Dra. Linda Ramos - GI Specialist</option>
                                            <option value="Dr. Antonio Lopez" data-dept="gastroenterologist">Dr. Antonio Lopez - Digestive Health Expert</option>
                                        </optgroup>
                                        
                                        <optgroup label="Nephrologist">
                                            <option value="Dr. Fernando Santos" data-dept="nephrologist">Dr. Fernando Santos - Nephrologist</option>
                                            <option value="Dra. Patricia Cruz" data-dept="nephrologist">Dra. Patricia Cruz - Kidney Specialist</option>
                                            <option value="Dr. Ricardo Mendoza" data-dept="nephrologist">Dr. Ricardo Mendoza - Renal Medicine</option>
                                        </optgroup>
                                        
                                        <optgroup label="Orthopedic">
                                            <option value="Dr. Manuel Garcia" data-dept="orthopedic">Dr. Manuel Garcia - Orthopedic Surgeon</option>
                                            <option value="Dra. Sofia Martinez" data-dept="orthopedic">Dra. Sofia Martinez - Sports Medicine</option>
                                            <option value="Dr. Eduardo Reyes" data-dept="orthopedic">Dr. Eduardo Reyes - Joint & Spine Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Urologist">
                                            <option value="Dr. Michael Conrad S. Mendoza" data-dept="urologist">Dr. Michael Conrad S. Mendoza</option>
                                            <option value="Dra. Angela Torres" data-dept="urologist">Dra. Angela Torres - Urologist</option>
                                            <option value="Dr. Benjamin Cruz" data-dept="urologist">Dr. Benjamin Cruz - Urological Surgeon</option>
                                        </optgroup>
                                        
                                        <optgroup label="Ophthalmologist">
                                            <option value="Dr. Pedro Santos" data-dept="ophthalmologist">Dr. Pedro Santos - Ophthalmologist</option>
                                            <option value="Dra. Rosa Garcia" data-dept="ophthalmologist">Dra. Rosa Garcia - Eye Surgeon</option>
                                            <option value="Dr. Luis Ramos" data-dept="ophthalmologist">Dr. Luis Ramos - Vision Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Obstetric and Gynecology">
                                            <option value="Dra. Katrina Rose S. Balasbas" data-dept="obstetric">Dra. Katrina Rose S. Balasbas</option>
                                            <option value="Dra. Isabel Reyes" data-dept="obstetric">Dra. Isabel Reyes - OB-GYN</option>
                                            <option value="Dra. Carmen Santos" data-dept="obstetric">Dra. Carmen Santos - Maternal Health Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Psychiatrist">
                                            <option value="Dr. Mark Anthony S. Mendoza" data-dept="psychiatrist">Dr. Mark Anthony S. Mendoza</option>
                                            <option value="Dra. Elena Cruz" data-dept="psychiatrist">Dra. Elena Cruz - Psychiatrist</option>
                                            <option value="Dr. Gabriel Torres" data-dept="psychiatrist">Dr. Gabriel Torres - Mental Health Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Psychologist">
                                            <option value="Dra. Anna Reyes" data-dept="psychologist">Dra. Anna Reyes - Clinical Psychologist</option>
                                            <option value="Dr. David Garcia" data-dept="psychologist">Dr. David Garcia - Counseling Psychologist</option>
                                            <option value="Dra. Maria Lopez" data-dept="psychologist">Dra. Maria Lopez - Child Psychologist</option>
                                        </optgroup>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Preferred Date *</label>
                                    <input type="date" id="appointmentDate" required>
                                </div>

                                <div class="form-group">
                                    <label>Preferred Time *</label>
                                    <select id="appointmentTime" required>
                                        <option value="">Select Time</option>
                                        <option value="08:00">08:00 AM</option>
                                        <option value="09:00">09:00 AM</option>
                                        <option value="10:00">10:00 AM</option>
                                        <option value="11:00">11:00 AM</option>
                                        <option value="13:00">01:00 PM</option>
                                        <option value="14:00">02:00 PM</option>
                                        <option value="15:00">03:00 PM</option>
                                        <option value="16:00">04:00 PM</option>
                                    </select>
                                </div>

                                <div class="form-group" id="roomTypeGroup" style="display:none;">
                                    <label>Room Type *</label>
                                    <select id="roomType">
                                        <option value="">Select Room Type</option>
                                        <option value="private">Private Room - ‚Ç±5,000/day</option>
                                        <option value="semi-private">Semi-Private Room - ‚Ç±3,000/day</option>
                                        <option value="ward">Ward - ‚Ç±1,500/day</option>
                                        <option value="icu">ICU - ‚Ç±10,000/day</option>
                                    </select>
                                </div>

                                <div class="form-group" id="durationGroup" style="display:none;">
                                    <label>Estimated Duration (days) *</label>
                                    <input type="number" id="duration" min="1" value="1">
                                </div>

                                <div class="form-group">
                                    <label>Reason for Visit *</label>
                                    <textarea id="reason" rows="3" required placeholder="Please describe your symptoms or reason for visit"></textarea>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn-secondary" onclick="closeBookingModal()">Cancel</button>
                                    <button type="submit" class="btn-primary">Book Appointment</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- ANNOUNCEMENTS SECTION -->
                <div id="announcements-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>All Announcements</h2>
                        </div>
                        <p style="color: #666; margin-bottom: 20px;">View all hospital announcements and updates here. You can add your announcements content in this section.</p>
                    </div>
                </div>

                <!-- MESSAGES SECTION -->
                <div id="messages-section" class="page-section" style="display:none">
                    <div class="section">
                        <div class="section-header">
                            <h2>Messages</h2>
                            <button class="btn-view-all" onclick="showComposeModal()">+ Compose Message</button>
                        </div>

                        <!-- Message Tabs - ADD INBOX TAB -->
                        <div class="message-tabs">
                            <button class="tab-btn active" onclick="showMessageTab('inbox')">Inbox (0)</button>
                            <button class="tab-btn" onclick="showMessageTab('sent')">Sent Messages</button>
                        </div>

                        <!-- Inbox Tab - ADD THIS -->
                        <div id="inbox-tab" class="message-tab-content">
                            <div id="inboxMessagesContainer">
                                <div class="loading-message" style="text-align: center; padding: 40px; color: #666;">
                                    <p>üì¨ Loading your inbox...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sent Messages Tab - KEEP THIS -->
                        <div id="sent-tab" class="message-tab-content" style="display:none;">
                            <div id="sentMessagesContainer">
                                <div class="loading-message" style="text-align: center; padding: 40px; color: #666;">
                                    <p>üìß Loading your messages...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compose Message Modal -->
                <div id="composeModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Compose Message</h2>
                            <span class="close-modal" onclick="closeComposeModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <form id="composeForm" onsubmit="sendMessage(event)">
                                <!-- Recipient -->
                                <div class="form-group">
                                    <label>To: *</label>
                                    <select id="recipient" required>
                                        <option value="">Select Recipient</option>
                                        <optgroup label="Pediatrics">
                                            <option value="Dra. Karen Icel B. Parcon" data-dept="pediatric">Dra. Karen Icel B. Parcon</option>
                                            <option value="Dr. Jose Martinez" data-dept="pediatric">Dr. Jose Martinez - Pediatrician</option>
                                            <option value="Dra. Maria Santos" data-dept="pediatric">Dra. Maria Santos - Pediatric Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Cardiologist">
                                            <option value="Dr. Roberto Cruz" data-dept="cardiologist">Dr. Roberto Cruz - Cardiologist</option>
                                            <option value="Dra. Ana Reyes" data-dept="cardiologist">Dra. Ana Reyes - Cardiac Specialist</option>
                                            <option value="Dr. Miguel Torres" data-dept="cardiologist">Dr. Miguel Torres - Interventional Cardiologist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Pulmonologist">
                                            <option value="Dr. Juan Dela Cruz" data-dept="pulmonologist">Dr. Juan Dela Cruz - Pulmonologist</option>
                                            <option value="Dra. Teresa Garcia" data-dept="pulmonologist">Dra. Teresa Garcia - Respiratory Specialist</option>
                                            <option value="Dr. Rafael Santos" data-dept="pulmonologist">Dr. Rafael Santos - Pulmonary Medicine</option>
                                        </optgroup>
                                        
                                        <optgroup label="Gastroenterologist">
                                            <option value="Dr. Carlos Rivera" data-dept="gastroenterologist">Dr. Carlos Rivera - Gastroenterologist</option>
                                            <option value="Dra. Linda Ramos" data-dept="gastroenterologist">Dra. Linda Ramos - GI Specialist</option>
                                            <option value="Dr. Antonio Lopez" data-dept="gastroenterologist">Dr. Antonio Lopez - Digestive Health Expert</option>
                                        </optgroup>
                                        
                                        <optgroup label="Nephrologist">
                                            <option value="Dr. Fernando Santos" data-dept="nephrologist">Dr. Fernando Santos - Nephrologist</option>
                                            <option value="Dra. Patricia Cruz" data-dept="nephrologist">Dra. Patricia Cruz - Kidney Specialist</option>
                                            <option value="Dr. Ricardo Mendoza" data-dept="nephrologist">Dr. Ricardo Mendoza - Renal Medicine</option>
                                        </optgroup>
                                        
                                        <optgroup label="Orthopedic">
                                            <option value="Dr. Manuel Garcia" data-dept="orthopedic">Dr. Manuel Garcia - Orthopedic Surgeon</option>
                                            <option value="Dra. Sofia Martinez" data-dept="orthopedic">Dra. Sofia Martinez - Sports Medicine</option>
                                            <option value="Dr. Eduardo Reyes" data-dept="orthopedic">Dr. Eduardo Reyes - Joint & Spine Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Urologist">
                                            <option value="Dr. Michael Conrad S. Mendoza" data-dept="urologist">Dr. Michael Conrad S. Mendoza</option>
                                            <option value="Dra. Angela Torres" data-dept="urologist">Dra. Angela Torres - Urologist</option>
                                            <option value="Dr. Benjamin Cruz" data-dept="urologist">Dr. Benjamin Cruz - Urological Surgeon</option>
                                        </optgroup>
                                        
                                        <optgroup label="Ophthalmologist">
                                            <option value="Dr. Pedro Santos" data-dept="ophthalmologist">Dr. Pedro Santos - Ophthalmologist</option>
                                            <option value="Dra. Rosa Garcia" data-dept="ophthalmologist">Dra. Rosa Garcia - Eye Surgeon</option>
                                            <option value="Dr. Luis Ramos" data-dept="ophthalmologist">Dr. Luis Ramos - Vision Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Obstetric and Gynecology">
                                            <option value="Dra. Katrina Rose S. Balasbas" data-dept="obstetric">Dra. Katrina Rose S. Balasbas</option>
                                            <option value="Dra. Isabel Reyes" data-dept="obstetric">Dra. Isabel Reyes - OB-GYN</option>
                                            <option value="Dra. Carmen Santos" data-dept="obstetric">Dra. Carmen Santos - Maternal Health Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Psychiatrist">
                                            <option value="Dr. Mark Anthony S. Mendoza" data-dept="psychiatrist">Dr. Mark Anthony S. Mendoza</option>
                                            <option value="Dra. Elena Cruz" data-dept="psychiatrist">Dra. Elena Cruz - Psychiatrist</option>
                                            <option value="Dr. Gabriel Torres" data-dept="psychiatrist">Dr. Gabriel Torres - Mental Health Specialist</option>
                                        </optgroup>
                                        
                                        <optgroup label="Psychologist">
                                            <option value="Dra. Anna Reyes" data-dept="psychologist">Dra. Anna Reyes - Clinical Psychologist</option>
                                            <option value="Dr. David Garcia" data-dept="psychologist">Dr. David Garcia - Counseling Psychologist</option>
                                            <option value="Dra. Maria Lopez" data-dept="psychologist">Dra. Maria Lopez - Child Psychologist</option>
                                        </optgroup>
                                    </select>
                                </div>

                                <!-- Subject -->
                                <div class="form-group">
                                    <label>Subject: *</label>
                                    <input type="text" id="subject" required placeholder="Enter message subject">
                                </div>

                                <!-- Category -->
                                <div class="form-group">
                                    <label>Category: *</label>
                                    <select id="category" required>
                                        <option value="">Select Category</option>
                                        <option value="Appointment Inquiry">Appointment Inquiry</option>
                                        <option value="Medical Question">Medical Question</option>
                                        <option value="Prescription Request">Prescription Request</option>
                                        <option value="Billing Inquiry">Billing Inquiry</option>
                                        <option value="Test Results">Test Results</option>
                                        <option value="Feedback/Complaint">Feedback/Complaint</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>

                                <!-- Message -->
                                <div class="form-group">
                                    <label>Message: *</label>
                                    <textarea id="messageBody" rows="6" required placeholder="Type your message here..."></textarea>
                                </div>

                                <!-- Priority -->
                                <div class="form-group">
                                    <label>Priority:</label>
                                    <div class="priority-options">
                                        <label class="radio-option">
                                            <input type="radio" name="priority" value="normal" checked>
                                            <span>üìã Normal</span>
                                        </label>
                                        <label class="radio-option">
                                            <input type="radio" name="priority" value="urgent">
                                            <span>‚ö†Ô∏è Urgent</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Submit Buttons -->
                                <div class="form-actions">
                                    <button type="button" class="btn-secondary" onclick="closeComposeModal()">Cancel</button>
                                    <button type="submit" class="btn-primary">Send Message</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- View Message Modal -->
                <div id="viewMessageModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Message Details</h2>
                            <span class="close-modal" onclick="closeViewMessageModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="message-view">
                                <div class="message-view-header">
                                    <h3 id="viewSubject"></h3>
                                    <p><strong>To:</strong> <span id="viewRecipient"></span></p>
                                    <p><strong>Category:</strong> <span id="viewCategory"></span></p>
                                    <p><strong>Date:</strong> <span id="viewDate"></span></p>
                                    <p><strong>Priority:</strong> <span id="viewPriority"></span></p>
                                </div>
                                <div class="message-view-body">
                                    <p id="viewBody"></p>
                                </div>
                                <div class="message-view-actions">
                                    <button class="btn-primary" onclick="showReplyModal()">Reply</button>
                                    <button class="btn-secondary" onclick="closeViewMessageModal()">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reply Message Modal -->
                <div id="replyModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Reply to Message</h2>
                            <span class="close-modal" onclick="closeReplyModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <form id="replyForm" onsubmit="sendReply(event)">
                                <!-- Original Message Info (Read-only) -->
                                <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                                    <p><strong>Original Subject:</strong> <span id="replyOriginalSubject"></span></p>
                                    <p><strong>To:</strong> <span id="replyRecipient"></span></p>
                                </div>

                                <!-- Reply Message -->
                                <div class="form-group">
                                    <label>Your Reply: *</label>
                                    <textarea id="replyBody" rows="6" required placeholder="Type your reply here..."></textarea>
                                </div>

                                <!-- Priority -->
                                <div class="form-group">
                                    <label>Priority:</label>
                                    <div class="priority-options">
                                        <label class="radio-option">
                                            <input type="radio" name="replyPriority" value="normal" checked>
                                            <span>üìã Normal</span>
                                        </label>
                                        <label class="radio-option">
                                            <input type="radio" name="replyPriority" value="urgent">
                                            <span>‚ö†Ô∏è Urgent</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Hidden fields to store original message data -->
                                <input type="hidden" id="replyToDoctor">
                                <input type="hidden" id="replyToCategory">
                                <input type="hidden" id="replyToSubject">

                                <!-- Submit Buttons -->
                                <div class="form-actions">
                                    <button type="button" class="btn-secondary" onclick="closeReplyModal()">Cancel</button>
                                    <button type="submit" class="btn-primary">Send Reply</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- MEDICAL RECORDS SECTION -->
                <div id="medical-records-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>Medical Records</h2>
                            <button class="btn-view-all" onclick="requestRecord()">üìÑ Request Records</button>
                        </div>

                        <!-- Patient Information -->
                        <div class="medical-info-card">
                            <h3>üë§ Patient Information</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Patient ID:</span>
                                    <span class="info-value">#STH2024-001</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Blood Type:</span>
                                    <span class="info-value">O+</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Allergies:</span>
                                    <span class="info-value">Penicillin, Peanuts</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Height:</span>
                                    <span class="info-value">170 cm</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Weight:</span>
                                    <span class="info-value">68 kg</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">BMI:</span>
                                    <span class="info-value">23.5 (Normal)</span>
                                </div>
                            </div>
                        </div>

                        <!-- Medical Records Tabs -->
                        <div class="message-tabs" style="margin-top: 30px;">
                            <button class="tab-btn active" onclick="showRecordTab('visits')">Visit History</button>
                            <button class="tab-btn" onclick="showRecordTab('prescriptions')">Prescriptions</button>
                            <button class="tab-btn" onclick="showRecordTab('lab')">Lab Results</button>
                            <button class="tab-btn" onclick="showRecordTab('imaging')">Imaging</button>
                            <button class="tab-btn" onclick="showRecordTab('documents')">Documents</button>
                        </div>

                        <!-- Visit History Tab -->
                        <div id="visits-tab" class="record-tab-content">
                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>ü©∫ Cardiology Consultation</h4>
                                        <p>Dr. Maria Santos | November 15, 2025</p>
                                    </div>
                                    <button class="btn-view-doc" onclick="viewDocument('visit1')">View Details</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Diagnosis:</strong> Hypertension - Stage 1</p>
                                    <p><strong>Notes:</strong> Patient presents with elevated blood pressure readings. Prescribed medication and lifestyle modifications.</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üß† Counselling Session</h4>
                                        <p>Dr. Anna Reyes | November 10, 2025</p>
                                    </div>
                                    <button class="btn-view-doc" onclick="viewDocument('visit2')">View Details</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Session Type:</strong> Stress Management</p>
                                    <p><strong>Notes:</strong> Patient responding well to cognitive behavioral therapy techniques. Continue weekly sessions.</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üè• General Check-up</h4>
                                        <p>Dr. Roberto Cruz | October 20, 2025</p>
                                    </div>
                                    <button class="btn-view-doc" onclick="viewDocument('visit3')">View Details</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Diagnosis:</strong> Annual Physical Examination</p>
                                    <p><strong>Notes:</strong> Overall health good. Recommended increased physical activity and balanced diet.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Prescriptions Tab -->
                        <div id="prescriptions-tab" class="record-tab-content" style="display:none;">
                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üíä Active Prescription</h4>
                                        <p>Dr. Maria Santos | November 15, 2025</p>
                                    </div>
                                    <span class="status-badge active">Active</span>
                                </div>
                                <div class="record-content">
                                    <p><strong>Medication:</strong> Amlodipine 5mg</p>
                                    <p><strong>Dosage:</strong> Once daily, morning</p>
                                    <p><strong>Duration:</strong> 30 days (Refillable)</p>
                                    <p><strong>Instructions:</strong> Take with or without food. Monitor blood pressure regularly.</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üíä Active Prescription</h4>
                                        <p>Dr. Anna Reyes | November 10, 2025</p>
                                    </div>
                                    <span class="status-badge active">Active</span>
                                </div>
                                <div class="record-content">
                                    <p><strong>Medication:</strong> Sertraline 50mg</p>
                                    <p><strong>Dosage:</strong> Once daily, morning</p>
                                    <p><strong>Duration:</strong> 90 days</p>
                                    <p><strong>Instructions:</strong> Take with food. Do not discontinue without consulting doctor.</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üíä Past Prescription</h4>
                                        <p>Dr. Roberto Cruz | September 15, 2025</p>
                                    </div>
                                    <span class="status-badge completed">Completed</span>
                                </div>
                                <div class="record-content">
                                    <p><strong>Medication:</strong> Amoxicillin 500mg</p>
                                    <p><strong>Dosage:</strong> Three times daily</p>
                                    <p><strong>Duration:</strong> 7 days (Completed)</p>
                                </div>
                            </div>
                        </div>

                        <!-- Lab Results Tab -->
                        <div id="lab-tab" class="record-tab-content" style="display:none;">
                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üî¨ Complete Blood Count (CBC)</h4>
                                        <p>November 20, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('cbc-nov2025.pdf')">‚¨áÔ∏è Download PDF</button>
                                </div>
                                <div class="record-content">
                                    <div class="lab-results">
                                        <div class="lab-result-row">
                                            <span>Hemoglobin:</span>
                                            <span>14.5 g/dL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                        <div class="lab-result-row">
                                            <span>White Blood Cells:</span>
                                            <span>7,200 cells/mcL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                        <div class="lab-result-row">
                                            <span>Platelets:</span>
                                            <span>250,000 cells/mcL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üî¨ Lipid Panel</h4>
                                        <p>November 15, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('lipid-nov2025.pdf')">‚¨áÔ∏è Download PDF</button>
                                </div>
                                <div class="record-content">
                                    <div class="lab-results">
                                        <div class="lab-result-row">
                                            <span>Total Cholesterol:</span>
                                            <span>195 mg/dL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                        <div class="lab-result-row">
                                            <span>LDL Cholesterol:</span>
                                            <span>125 mg/dL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                        <div class="lab-result-row">
                                            <span>HDL Cholesterol:</span>
                                            <span>55 mg/dL</span>
                                            <span class="result-normal">Normal</span>
                                        </div>
                                        <div class="lab-result-row">
                                            <span>Triglycerides:</span>
                                            <span>140 mg/dL</span>
                                            <span class="result-borderline">Borderline</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Imaging Tab -->
                        <div id="imaging-tab" class="record-tab-content" style="display:none;">
                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üì∑ Chest X-Ray</h4>
                                        <p>November 5, 2025 | Radiologist: Dr. Pedro Ramos</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('xray-chest-nov2025.pdf')">‚¨áÔ∏è Download</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Findings:</strong> No acute cardiopulmonary abnormality. Lungs are clear. Heart size normal.</p>
                                    <p><strong>Impression:</strong> Normal chest radiograph.</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üì∑ ECG (Electrocardiogram)</h4>
                                        <p>November 15, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('ecg-nov2025.pdf')">‚¨áÔ∏è Download</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Findings:</strong> Normal sinus rhythm. Heart rate: 72 bpm.</p>
                                    <p><strong>Impression:</strong> Normal ECG findings.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Documents Tab -->
                        <div id="documents-tab" class="record-tab-content" style="display:none;">
                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üìÑ Medical Certificate</h4>
                                        <p>Issued: November 15, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('med-cert-nov2025.pdf')">‚¨áÔ∏è Download</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Purpose:</strong> Fitness to Work</p>
                                    <p><strong>Valid Until:</strong> December 15, 2025</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üìÑ Discharge Summary</h4>
                                        <p>October 30, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('discharge-oct2025.pdf')">‚¨áÔ∏è Download</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Admission Date:</strong> October 28, 2025</p>
                                    <p><strong>Discharge Date:</strong> October 30, 2025</p>
                                    <p><strong>Diagnosis:</strong> Acute Gastroenteritis</p>
                                </div>
                            </div>

                            <div class="record-item">
                                <div class="record-header">
                                    <div>
                                        <h4>üìÑ Vaccination Record</h4>
                                        <p>Updated: September 1, 2025</p>
                                    </div>
                                    <button class="btn-download" onclick="downloadFile('vaccination-record.pdf')">‚¨áÔ∏è Download</button>
                                </div>
                                <div class="record-content">
                                    <p><strong>Last Vaccine:</strong> Influenza (Flu Shot)</p>
                                    <p><strong>Date:</strong> September 1, 2025</p>
                                    <p><strong>Next Due:</strong> September 2026</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SETTINGS SECTION -->
                <div id="settings-section" class="page-section" style="display:none;">
                    <div class="section">
                        <div class="section-header">
                            <h2>Settings</h2>
                        </div>
                        <p style="color: #666; margin-bottom: 20px;">Manage your account settings and preferences. You can add your settings content in this section.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>

        let currentMessage = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Load appointments when page loads
            loadAppointments();
            
            // Load messages
            loadMessages();
            
            // Load inbox
            loadInbox();
            
            // Set minimum date for appointment booking (today)
            const appointmentDateInput = document.getElementById('appointmentDate');
            if (appointmentDateInput) {
                const today = new Date().toISOString().split('T')[0];
                appointmentDateInput.setAttribute('min', today);
            }
        });

        // NAVIGATION FUNCTIONS
        function showSection(sectionName, event) {
            if (event && event.currentTarget) {
                // Remove active class from all nav items
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to clicked nav item
                event.currentTarget.classList.add('active');
            }
            
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.style.display = 'block';
                
                // Load data based on section
                if (sectionName === 'appointments') {
                    loadAppointments();
                } else if (sectionName === 'messages') {
                    loadMessages();
                    loadInbox();
                }
            }
        }

        // PROFILE DROPDOWN FUNCTIONS
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('show');
        }

        function closeDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.remove('show');
        }

        function viewProfile() {
            showSection('profile');
            closeDropdown();
        }

        function goToSettings() {
            showSection('settings');
            closeDropdown();
        }

        function goToHelp() {
            showSection('help');
            closeDropdown();
        }

        async function logout() {
            try {
                const response = await fetch('/api/website-logout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    window.location.href = data.redirect || '/website';
                } else {
                    alert('Logout failed');
                }
            } catch (error) {
                console.error('Logout error:', error);
                alert('An error occurred during logout');
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('profileDropdown');
            const userAvatar = document.querySelector('.user-avatar');
            
            if (dropdown && userAvatar) {
                if (!dropdown.contains(event.target) && !userAvatar.contains(event.target)) {
                    dropdown.classList.remove('show');
                }
            }
        });

        
        // APPOINTMENT BOOKING FUNCTIONS
        function showBookingModal() {
            document.getElementById("bookingModal").style.display = "block";
        }

        function closeBookingModal() {
            document.getElementById("bookingModal").style.display = "none";
            document.getElementById('bookingForm').reset();
            
            // Reset visibility of room-related fields
            document.getElementById('roomTypeGroup').style.display = 'none';
            document.getElementById('durationGroup').style.display = 'none';
            document.getElementById('departmentGroup').style.display = 'block';
        }

        function updateDoctorList() {
            const serviceType = document.getElementById("serviceType").value;
            const departmentGroup = document.getElementById("departmentGroup");
            const department = document.getElementById("department");
            const doctorSelect = document.getElementById("doctor");
            const roomTypeGroup = document.getElementById("roomTypeGroup");
            const durationGroup = document.getElementById("durationGroup");

            const allDoctors = doctorSelect.querySelectorAll("option[data-dept]");
            const allOptGroups = doctorSelect.querySelectorAll("optgroup");

            // Reset department
            department.value = "";
            Array.from(department.options).forEach(opt => {
                if (!opt.value) return;
                opt.style.display = "none";
            });

            let allowedDepts = [];

            if (serviceType === "checkup") {
                allowedDepts = ["pediatric"];
            } else if (serviceType === "consultation") {
                allowedDepts = ["cardiologist","pulmonologist","gastroenterologist","nephrologist","orthopedic","urologist","ophthalmologist","obstetric"];
            } else if (serviceType === "counselling") {
                allowedDepts = ["psychiatrist","psychologist"];
            }
            
            // Show/hide departments
            allowedDepts.forEach(d => {
                const opt = department.querySelector(`option[value="${d}"]`);
                if (opt) opt.style.display = "block";
            });

            // Show/hide room booking fields
            if (serviceType === "room") {
                departmentGroup.style.display = "none";
                department.required = false;
                roomTypeGroup.style.display = "block";
                durationGroup.style.display = "block";
                document.getElementById("roomType").required = true;
                document.getElementById("duration").required = true;
            } else {
                departmentGroup.style.display = "block";
                department.required = true;
                roomTypeGroup.style.display = "none";
                durationGroup.style.display = "none";
                document.getElementById("roomType").required = false;
                document.getElementById("duration").required = false;
            }

            if (serviceType === "room") {
                // Show all doctors for room service
                allDoctors.forEach(opt => opt.style.display = "block");
                allOptGroups.forEach(g => g.style.display = "block");
                doctorSelect.value = "";
            } else {
                // Reset doctor select
                doctorSelect.value = "";
                allDoctors.forEach(opt => opt.style.display = "none");
                allOptGroups.forEach(g => g.style.display = "none");

                // For counselling: show doctors immediately
                if (serviceType === "counselling") {
                    showDoctorsByDept(allowedDepts);
                }
            }
        }

        function showDoctorsByDept(depts) {
            const doctorSelect = document.getElementById("doctor");
            const options = doctorSelect.querySelectorAll("option[data-dept]");
            const groups = doctorSelect.querySelectorAll("optgroup");

            options.forEach(opt => {
                opt.style.display = depts.includes(opt.dataset.dept) ? "block" : "none";
            });

            groups.forEach(group => {
                const hasVisible = Array.from(group.children)
                    .some(opt => opt.style.display === "block");
                group.style.display = hasVisible ? "block" : "none";
            });
        }

        // Department change handler
        const departmentSelect = document.getElementById("department");
        if (departmentSelect) {
            departmentSelect.addEventListener("change", function () {
                const dept = this.value;
                const doctorSelect = document.getElementById("doctor");

                // Reset doctor selection
                doctorSelect.value = "";

                if (dept) {
                    showDoctorsByDept([dept]);
                } else {
                    // Show all doctors if no department selected
                    doctorSelect.querySelectorAll("option[data-dept]").forEach(opt => opt.style.display = "block");
                    doctorSelect.querySelectorAll("optgroup").forEach(g => g.style.display = "block");
                }
            });
        }

        async function submitBooking(event) {
            event.preventDefault();
            
            const formData = {
                serviceType: document.getElementById('serviceType').value,
                department: document.getElementById('department').value,
                doctor: document.getElementById('doctor').value,
                appointmentDate: document.getElementById('appointmentDate').value,
                appointmentTime: document.getElementById('appointmentTime').value,
                reason: document.getElementById('reason').value,
                roomType: document.getElementById('roomType')?.value,
                duration: document.getElementById('duration')?.value
            };
            
            try {
                const response = await fetch('/api/appointment/book', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Appointment booked successfully!');
                    closeBookingModal();
                    loadAppointments();
                    showSection('appointments');
                } else {
                    alert(data.message || 'Failed to book appointment');
                }
            } catch (error) {
                console.error('Booking error:', error);
                alert('An error occurred while booking appointment');
            }
        }

        async function loadAppointments() {
            try {
                const response = await fetch('/api/appointment/list');
                const data = await response.json();
                
                if (response.ok) {
                    displayAppointments(data.data);
                } else {
                    console.error('Failed to load appointments');
                }
            } catch (error) {
                console.error('Error loading appointments:', error);
            }
        }

        function displayAppointments(appointments) {
            const upcomingContainer = document.getElementById('upcomingAppointmentsContainer');
            const pastContainer = document.getElementById('pastAppointmentsContainer');
            
            // Display upcoming appointments
            if (appointments.upcoming && appointments.upcoming.length > 0) {
                upcomingContainer.innerHTML = appointments.upcoming.map(apt => {
                    // Show cancel button only if status is NOT "Cancelled", "Rejected", "Waiting to Approved", or "Approved"
                    const showCancelButton = !['Cancelled', 'Rejected', 'Waiting to Approved', 'Approved'].includes(apt.status);
                    
                    return `
                        <div class="appointment-item">
                            <div class="appointment-info">
                                <h4>${apt.doctor}${apt.department ? ' - ' + apt.department : ''}</h4>
                                <p>üìÖ ${formatDate(apt.appointment_date)} at ${apt.appointment_time}</p>
                                <p>ü©∫ ${apt.service_type}</p>
                                <p><strong>Reason:</strong> ${apt.reason}</p>
                                ${apt.room_type ? `<p><strong>Room Type:</strong> ${apt.room_type}</p>` : ''}
                                ${apt.duration ? `<p><strong>Duration:</strong> ${apt.duration} day(s)</p>` : ''}
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span class="appointment-status status-upcoming">${apt.status}</span>
                                ${showCancelButton ? 
                                    `<button class="btn-cancel" onclick="cancelAppointment(${apt.id})" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Cancel</button>` 
                                    : ''}
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                upcomingContainer.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No upcoming appointments</p>';
            }
            
            // Display past appointments
            if (appointments.past && appointments.past.length > 0) {
                pastContainer.innerHTML = appointments.past.map(apt => {
                    // Determine status class based on status
                    let statusClass = 'status-completed';
                    if (apt.status === 'Cancelled') statusClass = 'status-cancelled';
                    else if (apt.status === 'Rejected') statusClass = 'status-rejected';
                    else if (apt.status === 'Approved') statusClass = 'status-approved';
                    else if (apt.status === 'Completed') statusClass = 'status-completed';
                    
                    return `
                        <div class="appointment-item">
                            <div class="appointment-info">
                                <h4>${apt.doctor}${apt.department ? ' - ' + apt.department : ''}</h4>
                                <p>üìÖ ${formatDate(apt.appointment_date)} at ${apt.appointment_time}</p>
                                <p>ü©∫ ${apt.service_type}</p>
                                <p><strong>Reason:</strong> ${apt.reason}</p>
                                ${apt.room_type ? `<p><strong>Room Type:</strong> ${apt.room_type}</p>` : ''}
                                ${apt.duration ? `<p><strong>Duration:</strong> ${apt.duration} day(s)</p>` : ''}
                            </div>
                            <span class="appointment-status ${statusClass}">${apt.status}</span>
                        </div>
                    `;
                }).join('');
            } else {
                pastContainer.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No past appointments</p>';
            }
        }

        async function cancelAppointment(appointmentId) {
            if (!confirm('Are you sure you want to cancel this appointment?')) {
                return;
            }
            
            try {
                const response = await fetch(`/api/appointment/cancel/${appointmentId}`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Appointment cancelled successfully');
                    loadAppointments();
                } else {
                    alert(data.message || 'Failed to cancel appointment');
                }
            } catch (error) {
                console.error('Cancel error:', error);
                alert('An error occurred while cancelling appointment');
            }
        }

        // MESSAGE FUNCTIONS
        function showComposeModal() {
            document.getElementById('composeModal').style.display = 'block';
            document.getElementById('composeForm').reset();
        }

        function closeComposeModal() {
            document.getElementById('composeModal').style.display = 'none';
        }

        async function sendMessage(event) {
            event.preventDefault();
            
            const formData = {
                recipient: document.getElementById('recipient').value,
                subject: document.getElementById('subject').value,
                category: document.getElementById('category').value,
                messageBody: document.getElementById('messageBody').value,
                priority: document.querySelector('input[name="priority"]:checked').value
            };
            
            try {
                const response = await fetch('/api/message/send', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Message sent successfully!');
                    closeComposeModal();
                    loadMessages();
                } else {
                    alert(data.message || 'Failed to send message');
                }
            } catch (error) {
                console.error('Send message error:', error);
                alert('An error occurred while sending message');
            }
        }

        async function loadMessages() {
            try {
                const response = await fetch('/api/message/list');
                const data = await response.json();
                
                if (response.ok) {
                    displayMessages(data.data);
                }
            } catch (error) {
                console.error('Error loading messages:', error);
            }
        }

        async function loadInbox() {
            try {
                const response = await fetch('/api/message/inbox');
                const data = await response.json();
                
                if (response.ok) {
                    displayInbox(data.data);
                    
                    // Update inbox count in tab
                    const inboxTab = document.querySelector('.message-tabs .tab-btn:first-child');
                    if (inboxTab) {
                        inboxTab.textContent = `Inbox (${data.data.length})`;
                    }
                }
            } catch (error) {
                console.error('Error loading inbox:', error);
            }
        }

        function displayMessages(messages) {
            const container = document.getElementById('sentMessagesContainer');
            
            if (messages && messages.length > 0) {
                container.innerHTML = messages.map(msg => `
                    <div class="message-item" onclick="viewMessage(${msg.id})" style="cursor: pointer; padding: 15px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 10px;">
                        <div class="message-header" style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <h4 style="margin: 0;">${msg.subject}</h4>
                            <span class="message-date" style="color: #666;">${formatDate(msg.sent_date)}</span>
                        </div>
                        <p style="margin: 5px 0;"><strong>To:</strong> ${msg.recipient}</p>
                        <p style="margin: 5px 0;"><strong>Category:</strong> ${msg.category}</p>
                        <p class="message-preview" style="color: #666; margin: 10px 0 0 0;">${msg.message_body.substring(0, 100)}...</p>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No sent messages</p>';
            }
        }

        function displayInbox(messages) {
            const container = document.getElementById('inboxMessagesContainer');
            
            if (messages && messages.length > 0) {
                container.innerHTML = messages.map(msg => `
                    <div class="message-item ${msg.is_read ? '' : 'unread'}" onclick="viewInboxMessage(${msg.id})" style="cursor: pointer; padding: 15px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 10px; ${!msg.is_read ? 'background: #f0f8ff;' : ''}">
                        <div class="message-header" style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <h4 style="margin: 0;">${msg.subject} ${!msg.is_read ? '<span class="badge-new" style="background: #dc3545; color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; margin-left: 8px;">NEW</span>' : ''}</h4>
                            <span class="message-date" style="color: #666;">${formatDate(msg.sent_date)}</span>
                        </div>
                        <p style="margin: 5px 0;"><strong>From:</strong> ${msg.sender_name} (${msg.sender_type})</p>
                        <p style="margin: 5px 0;"><strong>Category:</strong> ${msg.category}</p>
                        <p class="message-preview" style="color: #666; margin: 10px 0 0 0;">${msg.message_body.substring(0, 100)}...</p>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">No inbox messages</p>';
            }
        }

        function viewMessage(messageId) {
            fetch(`/api/message/${messageId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        const message = data.data;
                        currentMessage = message;
                        document.getElementById('viewSubject').textContent = message.subject;
                        document.getElementById('viewRecipient').textContent = message.recipient;
                        document.getElementById('viewCategory').textContent = message.category;
                        document.getElementById('viewDate').textContent = formatDate(message.sent_date);
                        document.getElementById('viewPriority').textContent = message.priority.toUpperCase();
                        document.getElementById('viewBody').textContent = message.message_body;
                        
                        document.getElementById('viewMessageModal').style.display = 'block';
                    }
                })
                .catch(error => {
                    console.error('Error viewing message:', error);
                    alert('Failed to load message');
                });
        }

        function viewInboxMessage(messageId) {
            // For now, since inbox is empty, we'll keep the old implementation
            // You can update this when you implement the inbox functionality
            fetch(`/api/message/inbox`)
                .then(response => response.json())
                .then(data => {
                    const message = data.data.find(m => m.id === messageId);
                    if (message) {
                        currentMessage = message;
                        document.getElementById('viewSubject').textContent = message.subject;
                        document.getElementById('viewRecipient').textContent = `From: ${message.sender_name}`;
                        document.getElementById('viewCategory').textContent = message.category;
                        document.getElementById('viewDate').textContent = formatDate(message.sent_date);
                        document.getElementById('viewPriority').textContent = message.priority.toUpperCase();
                        document.getElementById('viewBody').textContent = message.message_body;
                        
                        document.getElementById('viewMessageModal').style.display = 'block';
                    }
                });
        }

        function closeViewMessageModal() {
            document.getElementById('viewMessageModal').style.display = 'none';
        }

        function showReplyModal() {
            if (!currentMessage) return;
            
            document.getElementById('replyOriginalSubject').textContent = currentMessage.subject;
            document.getElementById('replyRecipient').textContent = currentMessage.recipient;
            document.getElementById('replyToDoctor').value = currentMessage.recipient;
            document.getElementById('replyToCategory').value = currentMessage.category;
            document.getElementById('replyToSubject').value = currentMessage.subject;
            
            closeViewMessageModal();
            document.getElementById('replyModal').style.display = 'block';
        }

        function closeReplyModal() {
            document.getElementById('replyModal').style.display = 'none';
        }

        async function sendReply(event) {
            event.preventDefault();
            
            const formData = {
                parentMessageId: currentMessage.id,
                messageBody: document.getElementById('replyBody').value,
                priority: document.querySelector('input[name="replyPriority"]:checked').value
            };
            
            try {
                const response = await fetch('/api/message/reply', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Reply sent successfully!');
                    closeReplyModal();
                    loadMessages();
                } else {
                    alert(data.message || 'Failed to send reply');
                }
            } catch (error) {
                console.error('Send reply error:', error);
                alert('An error occurred while sending reply');
            }
        }

        function showMessageTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.message-tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.message-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        function toggleFaq(element) {
            const faqItem = element.closest('.faq-item');
            const answer = faqItem.querySelector('.faq-answer');
            const toggle = element.querySelector('.faq-toggle');
            
            if (answer.style.display === 'block') {
                answer.style.display = 'none';
                toggle.textContent = '+';
            } else {
                answer.style.display = 'block';
                toggle.textContent = '-';
            }
        }

        function showRecordTab(tabName) {
            document.querySelectorAll('.record-tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            document.querySelectorAll('.message-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            event.target.classList.add('active');
        }

        function viewDocument(docId) {
            alert(`Viewing document: ${docId} - Feature coming soon`);
        }

        function downloadFile(filename) {
            alert(`Downloading: ${filename} - Feature coming soon`);
        }

        function requestRecord() {
            alert('Record request feature - Coming soon');
        }

        function enableEditProfile() {
            const formFields = document.querySelectorAll('#profileForm input, #profileForm select, #profileForm textarea');
            formFields.forEach(field => field.disabled = false);
            document.getElementById('profileActions').style.display = 'flex';
        }

        function cancelEditProfile() {
            const formFields = document.querySelectorAll('#profileForm input, #profileForm select, #profileForm textarea');
            formFields.forEach(field => field.disabled = true);
            document.getElementById('profileActions').style.display = 'none';
            document.getElementById('profileForm').reset();
        }

        function saveProfile() {
            alert('Profile update feature - Coming soon');
            cancelEditProfile();
        }

        function callSupport() {
            window.location.href = 'tel:+63464830000';
        }

        function emailSupport() {
            window.location.href = 'mailto:support@standrews.com';
        }

        function visitHospital() {
            window.open('https://maps.google.com/?q=St.+Andrew+Hospital+Tagaytay', '_blank');
        }
    </script>
</body>
</html>